import{A as C}from"./AlertIcon-CczqOs8F.js";import{c as _,e as I,aQ as O,r as B,w as F,h as E,o as U,aN as z,j,m as M,n as d,p as A,q as P,s as R,v as W,z as t,y as p,x,B as q,I as K,ac as Q,aK as $,a5 as S,aO as G,_ as H}from"./index-DsnP68ci.js";const J=_({__name:"Slider",props:{miniWidget:{}},setup(T){const l=I(),e=O(T).miniWidget,m=B(0);let i,r;const u=a=>{var s;let o;a==null||isNaN(Number(a))?o=((s=e.value.options.layout)==null?void 0:s.minValue)||0:o=Number(a),m.value=o};F(()=>l.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(l.showElementPropsDrawer(e.value.hash),setTimeout(()=>{l.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const n=E(()=>{var a;return((a=e.value.options.dataLakeVariable)==null?void 0:a.id)||l.editingMode}),c=()=>{e.value.options.dataLakeVariable&&(i=Q(e.value.options.dataLakeVariable.id,a=>{r&&new Date().getTime()-r.getTime()<100||(r=new Date,u(a))}),u($(e.value.options.dataLakeVariable.id)))};F(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,o)=>{o&&i&&S(o,i),a&&c()});const N=a=>{if(!l.editingMode&&e.value.options.dataLakeVariable){const o=Number(a.toFixed(1));l.setMiniWidgetLastValue(e.value.hash,o),G(e.value.options.dataLakeVariable.id,o)}};return U(()=>{var a;(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,l.updateElementOptions(e.value.hash,{layout:{label:"",minValue:0,maxValue:100,showTooltip:!0,color:"#FFFFFF",coloredLabel:!1,labelWidth:((a=e.value.options.layout)==null?void 0:a.labelWidth)||0},variableType:"number",dataLakeVariable:void 0})),e.value.options.dataLakeVariable?(e.value.options.dataLakeVariable.allowUserToChangeValue||z({...e.value.options.dataLakeVariable,allowUserToChangeValue:!0}),c()):u(l.getMiniWidgetLastValue(e.value.hash))}),j(()=>{e.value.options.dataLakeVariable&&i&&S(e.value.options.dataLakeVariable.id,i)}),(a,o)=>{var s,b,V,v,h,g,f,k,y,L,w;return d(),M("div",{class:p(["slider-container",((s=t(l).elementToShowOnDrawer)==null?void 0:s.hash)===t(e).hash&&t(l).editingMode?"bg-[#00000010] ":"border-0"]),onClick:o[1]||(o[1]=D=>t(l).editingMode&&t(l).showElementPropsDrawer(t(e).hash))},[A("div",{style:x({minWidth:((b=t(e).options.layout)==null?void 0:b.labelWidth)+"px"})},[((V=t(e).options.layout)==null?void 0:V.label)!==""?(d(),M("p",{key:0,style:x({color:(v=t(e).options.layout)!=null&&v.coloredLabel?(h=t(e).options.layout)==null?void 0:h.color:"#FFFFFF"}),class:p(["mr-3 mb-[3px]",{"opacity-30":!n.value}])},q((g=t(e).options.layout)==null?void 0:g.label),7)):W("",!0)],4),P(K,{"model-value":m.value,min:(f=t(e).options.layout)==null?void 0:f.minValue,max:(k=t(e).options.layout)==null?void 0:k.maxValue,"thumb-label":(y=t(e).options.layout)==null?void 0:y.showTooltip,"hide-details":"",class:p(["min-w-20",{"pointer-events-none":t(l).editingMode||!n.value,"scale-75":((L=t(e).options.layout)==null?void 0:L.size)==="small","opacity-30":!n.value}]),color:((w=t(e).options.layout)==null?void 0:w.color)||"white","onUpdate:modelValue":o[0]||(o[0]=D=>N(D))},null,8,["model-value","min","max","thumb-label","color","class"]),n.value?W("",!0):(d(),R(C,{key:0,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-16",tooltip:"This element isn't connected to a data-lake variable yet. Right click and select options to configure it."}))],2)}}}),ee=H(J,[["__scopeId","data-v-41f7d6a5"]]);export{ee as default};
