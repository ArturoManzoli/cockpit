import{c as b,z as S,k,J as O,r as h,w as f,o as C,au as M,h as x,av as y,aw as W,l as E,m as D,n as _,H as A,N,Q as z,s as o,x as g,ah as B,O as T,ax as j,_ as P}from"./index-DvbKr47E.js";const U=b({__name:"Dropdown",props:{miniWidget:{}},setup(V){var r,c;const i=S(),s=V,n=k(()=>{var t;return((t=e.value.options.layout)==null?void 0:t.selectorOptions)||[]}),e=O(s).miniWidget,u=h(n.value.find(t=>{var a;return t.value===((a=s.miniWidget.options.lastSelected)==null?void 0:a.value)})||n.value[0]),d=h(((r=s.miniWidget.options.lastSelected)==null?void 0:r.value)||((c=n.value[0])==null?void 0:c.value));f(()=>i.miniWidgetManagerVars(e.value.hash).configMenuOpen,t=>{t===!0&&(i.showElementPropsDrawer(e.value.hash),setTimeout(()=>{i.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0}),f(u,t=>{i.updateElementOptions(e.value.hash,{...e.value.options,lastSelected:t})});const w=t=>{if(i.editingMode)return;const a=n.value.find(l=>l.value===t);a&&(d.value=t,e.value.options.actionVariable&&j(e.value.options.actionVariable.id,t),i.updateElementOptions(e.value.hash,{...e.value.options,lastSelected:a}))};return C(()=>{var t;(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,i.updateElementOptions(e.value.hash,{cockpitAction:void 0,actionVariable:void 0,lastSelected:{name:"",value:""},layout:{selectorOptions:[{name:"",value:""}],align:"start",width:168}})),e.value.options.actionVariable&&M(e.value.options.actionVariable.name,a=>{u.value=n.value.find(l=>l.value===a)}),((t=e.value.options.lastSelected)==null?void 0:t.name)!==""&&(u.value=e.value.options.lastSelected)}),x(()=>{e.value.options.actionVariable&&(y(e.value.options.actionVariable.name),W(e.value.options.actionVariable.name))}),(t,a)=>{var l,p,v;return E(),D("div",{class:g(["flex w-full",((l=o(i).elementToShowOnDrawer)==null?void 0:l.hash)===o(e).hash&&o(i).editingMode?"bg-[#00000010] ":"border-0"]),style:T({width:"100%",justifyContent:(p=o(e).options.layout)==null?void 0:p.align}),onClick:a[1]||(a[1]=m=>o(i).editingMode&&o(i).showElementPropsDrawer(o(e).hash))},[_("div",null,[A(B,{modelValue:d.value,"onUpdate:modelValue":[a[0]||(a[0]=m=>d.value=m),w],items:n.value,"item-title":"name","item-value":"value",theme:"dark",density:"compact",variant:"filled","min-width":((v=o(e).options.layout)==null?void 0:v.width)||168,"hide-details":"",class:g(["text-white",{"pointer-events-none":o(i).editingMode}])},{default:N(()=>a[2]||(a[2]=[z(" > ")])),_:1},8,["modelValue","items","min-width","class"])])],6)}}}),I=P(U,[["__scopeId","data-v-5e143922"]]);export{I as default};
