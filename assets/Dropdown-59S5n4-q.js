import{A as S}from"./AlertIcon-CczqOs8F.js";import{c as O,e as W,h as b,t as _,r as k,w as c,o as x,j as C,m as E,n as L,p as B,s as T,v as j,q as z,y as w,z as l,ap as I,x as N,aO as A,ac as P,aK as R,a5 as y,_ as U}from"./index-DsnP68ci.js";const q=O({__name:"Dropdown",props:{miniWidget:{}},setup(M){var m,h;const i=W();let o;const u=M,n=b(()=>{var a;return((a=e.value.options.layout)==null?void 0:a.selectorOptions)||[]}),e=_(u).miniWidget,p=k(n.value.find(a=>{var t;return a.value===((t=u.miniWidget.options.lastSelected)==null?void 0:t.value)})||n.value[0]),s=k(((m=u.miniWidget.options.lastSelected)==null?void 0:m.value)||((h=n.value[0])==null?void 0:h.value));c(()=>i.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(i.showElementPropsDrawer(e.value.hash),setTimeout(()=>{i.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0}),c(p,a=>{i.updateElementOptions(e.value.hash,{...e.value.options,lastSelected:a})});const D=a=>{if(i.editingMode)return;const t=n.value.find(r=>r.value===a);t&&(s.value=a,e.value.options.dataLakeVariable&&A(e.value.options.dataLakeVariable.id,a),i.setMiniWidgetLastValue(e.value.hash,t.value))},d=b(()=>{var a;return((a=e.value.options.dataLakeVariable)==null?void 0:a.id)||i.editingMode}),v=()=>{e.value.options.dataLakeVariable&&(o=P(e.value.options.dataLakeVariable.id,a=>{s.value=String(a)}),s.value=String(R(e.value.options.dataLakeVariable.id)))};return c(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,t)=>{t&&o&&y(t,o),a&&v()}),x(()=>{if((!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,i.updateElementOptions(e.value.hash,{layout:{selectorOptions:[],align:"start",width:168},variableType:"string",dataLakeVariable:void 0})),e.value.options.dataLakeVariable)v();else{const a=i.getMiniWidgetLastValue(e.value.hash);p.value=n.value.find(t=>t.value===a)||n.value[0]}}),C(()=>{e.value.options.dataLakeVariable&&o&&y(e.value.options.dataLakeVariable.id,o)}),(a,t)=>{var r,g,f;return L(),E("div",{class:w(["flex relative w-full",((r=l(i).elementToShowOnDrawer)==null?void 0:r.hash)===l(e).hash&&l(i).editingMode?"bg-[#00000010] ":"border-0"]),style:N({width:"100%",justifyContent:(g=l(e).options.layout)==null?void 0:g.align}),onClick:t[1]||(t[1]=V=>l(i).editingMode&&l(i).showElementPropsDrawer(l(e).hash))},[B("div",null,[z(I,{modelValue:s.value,"onUpdate:modelValue":[t[0]||(t[0]=V=>s.value=V),D],items:n.value,"item-title":"name","item-value":"value",theme:"dark",density:"compact",variant:"filled","min-width":((f=l(e).options.layout)==null?void 0:f.width)||168,"hide-details":"",class:w(["text-white",{"pointer-events-none":l(i).editingMode||!d.value,"opacity-30":!d.value}])},null,8,["modelValue","items","min-width","class"])]),d.value?j("",!0):(L(),T(S,{key:0,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-10 mt-2",tooltip:"This element isn't connected to a data-lake variable yet. Right click and select options to configure it."}))],6)}}}),F=U(q,[["__scopeId","data-v-b0ceba2f"]]);export{F as default};
