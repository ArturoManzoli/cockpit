import{A as T}from"./AlertIcon-4RZPqScJ.js";import{c as W,e as B,t as E,r as F,w as V,h as u,o as O,j as P,m as f,n as d,v as L,q as y,s as S,z as o,y as p,B as z,E as N,p as j,aN as A,aO as I,Y as U,a8 as R,x as $,aP as q,ac as K,aK as Y,a5 as w}from"./index-D6uV4iv9.js";const J=W({__name:"Checkbox",props:{miniWidget:{}},setup(x){const t=B(),e=E(x).miniWidget,l=F(!1);let s;const C=()=>{t.editingMode||(t.setMiniWidgetLastValue(e.value.hash,l.value),e.value.options.dataLakeVariable&&q(e.value.options.dataLakeVariable.id,l.value))};V(()=>t.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(t.showElementPropsDrawer(e.value.hash),setTimeout(()=>{t.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const n=u(()=>{var a;return!!((a=e.value.options.dataLakeVariable)!=null&&a.id)}),M=u(()=>{var a;return((a=e.value.options.dataLakeVariable)==null?void 0:a.allowUserToChangeValue)===!0}),c=u(()=>{var a;return!!((a=e.value.options.dataLakeVariable)!=null&&a.id)&&M.value&&!t.editingMode}),v=()=>{e.value.options.dataLakeVariable&&(s=K(e.value.options.dataLakeVariable.id,a=>{l.value=!!a}),l.value=!!Y(e.value.options.dataLakeVariable.id))};return V(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,i)=>{i&&s&&w(i,s),a&&v()}),O(()=>{(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,t.updateElementOptions(e.value.hash,{layout:{label:"",align:"center",color:"#FFFFFF"},variableType:"boolean",dataLakeVariable:void 0})),e.value.options.dataLakeVariable?v():l.value=t.getMiniWidgetLastValue(e.value.hash)}),P(()=>{e.value.options.dataLakeVariable&&s&&w(e.value.options.dataLakeVariable.id,s)}),(a,i)=>{var m,h,b,k;return d(),f("div",{class:p(["flex items-center h-[30px] min-w-[50px] px-1",((m=o(t).elementToShowOnDrawer)==null?void 0:m.hash)===o(e).hash&&o(t).editingMode?"bg-[#00000010] ":"border-0"]),style:$({justifyContent:(h=o(e).options.layout)==null?void 0:h.align}),onClick:i[2]||(i[2]=r=>o(t).editingMode&&o(t).showElementPropsDrawer(o(e).hash))},[((b=o(e).options.layout)==null?void 0:b.label)!==""?(d(),f("p",{key:0,class:p(["mr-3 mb-[3px] text-white",{"opacity-50":!n.value}])},z((k=o(e).options.layout)==null?void 0:k.label),3)):L("",!0),y(R,{text:"This element is on display mode. To make it interactive, create or select a different data-lake variable",location:"top","open-delay":"500",disabled:c.value||!n.value},{activator:N(({props:r})=>{var g;return[j("div",A(I(r)),[y(U,{modelValue:l.value,"onUpdate:modelValue":[i[0]||(i[0]=D=>l.value=D),C],"hide-details":"",color:(g=o(e).options.layout)==null?void 0:g.color,class:p(["text-white",{"opacity-30":!n.value,"cursor-default pointer pointer-events-none":!c.value}]),theme:"dark"},null,8,["modelValue","color","class"])],16)]}),_:1},8,["disabled"]),!n.value&&!o(t).editingMode?(d(),S(T,{key:1,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-10 mt-[10px]",tooltip:"This element isn't connected to a data-lake variable yet. Click here to configure it.",onClick:i[1]||(i[1]=r=>o(t).showElementPropsDrawer(o(e).hash))})):L("",!0)],6)}}});export{J as default};
