import{A as x}from"./AlertIcon-DLvJWP0K.js";import{c as T,e as B,t as E,r as O,w as k,h as d,o as P,j as S,m as f,n as c,q as L,s as A,v as w,E as I,p as N,aN as z,aO as R,H as U,y as v,z as o,B as j,a8 as $,ac as q,aK as H,a5 as y,aP as K}from"./index-A5clmQ50.js";const J=T({__name:"Switch",props:{miniWidget:{}},setup(M){const t=B(),r=M,e=E(r).miniWidget,l=O(!0);let n;k(()=>t.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(t.showElementPropsDrawer(e.value.hash),setTimeout(()=>{t.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const D=d(()=>!u.value&&!t.editingMode&&t.isRealMiniWidget(e.value.hash)),u=d(()=>{var a;return!!((a=e.value.options.dataLakeVariable)!=null&&a.id)}),F=d(()=>{var a;return((a=e.value.options.dataLakeVariable)==null?void 0:a.allowUserToChangeValue)===!0}),m=d(()=>{var a;return!!((a=e.value.options.dataLakeVariable)!=null&&a.id)&&F.value&&!t.editingMode}),g=()=>{e.value.options.dataLakeVariable&&(n=q(e.value.options.dataLakeVariable.id,a=>{l.value=!!a}),l.value=!!H(e.value.options.dataLakeVariable.id))};k(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,i)=>{i&&n&&y(i,n),a&&g()});const W=()=>{t.editingMode||e.value.options.dataLakeVariable&&(t.setMiniWidgetLastValue(e.value.hash,l.value),K(e.value.options.dataLakeVariable.id,l.value))};return P(()=>{var a,i,s;(!r.miniWidget.options||Object.keys(r.miniWidget.options).length===0)&&(e.value.isCustomElement=!0,t.updateElementOptions(r.miniWidget.hash,{layout:{align:((a=e.value.options.layout)==null?void 0:a.align)||"center",color:((i=e.value.options.layout)==null?void 0:i.color)||"#FFFFFF",label:((s=e.value.options.layout)==null?void 0:s.label)||""},variableType:"boolean",dataLakeVariable:void 0,toggled:!0}),l.value=!0),e.value.options.dataLakeVariable?g():l.value=t.getMiniWidgetLastValue(e.value.hash)}),S(()=>{e.value.options.dataLakeVariable&&n&&y(e.value.options.dataLakeVariable.id,n)}),(a,i)=>{var s;return c(),f("div",{class:v(["flex items-center h-[30px] px-4",((s=o(t).elementToShowOnDrawer)==null?void 0:s.hash)===o(e).hash&&o(t).editingMode?"bg-[#00000010] ":"border-0"]),onClick:i[2]||(i[2]=p=>o(t).editingMode&&o(t).showElementPropsDrawer(o(e).hash))},[L($,{text:"This element is on display mode. To make it interactive, create or select a different data-lake variable",location:"top","open-delay":"500",disabled:m.value||!u.value},{activator:I(({props:p})=>{var h,b,V;return[N("div",z(R(p)),[L(U,{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=C=>l.value=C),"hide-details":"",color:((h=o(e).options.layout)==null?void 0:h.color)||"#FFFFFF",class:v([{"opacity-40":!u.value,"cursor-default pointer pointer-events-none":!m.value},"min-w-[35px]"]),onChange:W},null,8,["modelValue","color","class"]),((b=o(e).options.layout)==null?void 0:b.label)!==""?(c(),f("p",{key:0,class:v(["ml-3 mb-[3px] whitespace-nowrap",{"opacity-50":!u.value}])},j((V=o(e).options.layout)==null?void 0:V.label),3)):w("",!0)],16)]}),_:1},8,["disabled"]),D.value?(c(),A(x,{key:0,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-6 mt-[10px]",tooltip:"This element isn't connected to a data-lake variable yet. Click here to configure it.",onClick:i[1]||(i[1]=p=>o(t).showElementPropsDrawer(o(e).hash))})):w("",!0)],2)}}});export{J as default};
