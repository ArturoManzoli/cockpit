import{c as F,K as L,y as B,u as T,af as W,J as N,r as P,L as j,l as A,m as g,n as l,I as E,s as I,G as $,H as e,O as a,Q as f,a6 as G,a7 as d,ah as h,a_ as H,x as M,v as s,a5 as p,ag as m,a4 as v,aA as J,aB as b,aZ as y,a8 as K,N as Q,ai as Z}from"./index-Dt4WRuJa.js";const q={class:"w-full h-full flex items-end"},U={class:"flex flex-col justify-start items-center h-auto pt-2 cursor-pointer"},X={class:"flex justify-between w-full px-2 pb-[2px] border-b-[1px] border-[#FFFFFF15]"},Y={class:"flex justify-centerw-full px-4 mt-1"},ee={class:"flex items-center"},te=F({__name:"MissionControlPanel",props:{widget:{}},setup(k){const V=L(),x=B(),o=T(),i=W(),u=N(k).widget,r=P(!1),_=()=>{r.value=!r.value},S=()=>{x.allowMovingAndResizing(u.value.hash,!0),window.addEventListener("mouseup",c),window.addEventListener("dragend",c)},c=()=>{x.allowMovingAndResizing(u.value.hash,!1),window.removeEventListener("mouseup",c),window.removeEventListener("dragend",c)},C={width:.14638572402097255,height:.09641222207770606},z=async()=>{await i.callMapDownloadMissionFromVehicle()},O=()=>{i.callMapClearMapDrawing()};j(()=>{x.widgetManagerVars(u.value.hash).allowResizing=!1,u.value.size=C});const R=async()=>{try{i.isMissionRunning?await o.pauseMission():i.executeMissionOnVehicle()}catch(w){Z({message:`Failed to ${i.isMissionRunning?"pause":"start"} mission: ${w.message}`,variant:"error"})}};return(w,t)=>(g(),A("div",q,[l("div",{class:M(["w-full rounded-lg overflow-hidden -mt-2",[r.value?"h-[42px]":"h-full"]]),style:Q(s(V).globalGlassMenuStyles)},[l("div",U,[l("div",X,[e(G,{class:"cursor-grab opacity-40",onMousedown:S,onMouseup:c},{default:a(()=>t[2]||(t[2]=[f(" mdi-drag ")])),_:1,__:[2]}),t[3]||(t[3]=l("div",{class:"select-none text-[14px] font-bold mt-[1px]"},"Mission control panel",-1)),e(d,{icon:r.value?"mdi-chevron-up":"mdi-chevron-down",variant:"text",size:"36",class:"mt-[-6px] opacity-60 -mr-1",onClick:_},null,8,["icon"])]),r.value?I("",!0):(g(),E(h,{key:0})),$(l("div",Y,[l("div",{class:M(["flex w-[280px] px-2 justify justify-around gap-4 items-center mt-2 mb-1 shadow-sm overflow-hidden",s(o).isVehicleOnline?"":"active-events-on-disabled"]),style:{"border-radius":"3px"}},[e(v,{location:"top",text:"Skip to previous waypoint"},{activator:a(({props:n})=>[e(d,p(n,{size:"x-small",icon:"mdi-skip-previous",variant:"text",class:"text-[20px]",disabled:!s(i).canSkipToPrevWp||!s(o).isVehicleOnline,onClick:t[0]||(t[0]=m(D=>s(i).skipToWaypoint(-1),["stop"]))}),null,16,["disabled"])]),_:1}),e(v,{location:"top",text:s(i).isMissionRunning?"Pause mission":"Start / resume mission"},{activator:a(({props:n})=>[e(d,p(n,{size:"x-small",icon:s(i).isMissionRunning?"mdi-pause":"mdi-play",variant:"text",class:"text-[20px] border-x",disabled:!s(o).isVehicleOnline,onClick:m(R,["stop"])}),null,16,["icon","disabled"])]),_:1},8,["text"]),e(v,{location:"top",text:"Skip to next waypoint"},{activator:a(({props:n})=>[e(d,p(n,{size:"x-small",icon:"mdi-skip-next",variant:"text",class:"text-[20px]",disabled:!s(i).canSkipToNextWp||!s(o).isVehicleOnline,onClick:t[1]||(t[1]=m(D=>s(i).skipToWaypoint(1),["stop"]))}),null,16,["disabled"])]),_:1}),e(v,{location:"top",text:"Stop mission and return to first waypoint"},{activator:a(({props:n})=>[e(d,p(n,{size:"x-small",icon:"mdi-stop",variant:"text",class:"text-[20px]",disabled:!s(i).isMissionRunning,onClick:m(s(i).stopMission,["stop"])}),null,16,["disabled","onClick"])]),_:1}),l("div",ee,[e(h,{vertical:"",class:"h-8 mr-3"}),e(K,{"offset-y":"",theme:"dark"},{activator:a(({props:n})=>[e(d,p({variant:"text"},n,{icon:"mdi-dots-vertical",size:"22",class:"cursor-pointer -mr-1"}),null,16)]),default:a(()=>[e(J,null,{default:a(()=>[e(b,{disabled:!s(o).isVehicleOnline,class:"cursor-pointer",onClick:z},{default:a(()=>[e(y,null,{default:a(()=>t[4]||(t[4]=[f("Download mission from vehicle")])),_:1,__:[4]})]),_:1},8,["disabled"]),e(b,{disabled:!s(o).isVehicleOnline,class:"cursor-pointer",onClick:O},{default:a(()=>[e(y,null,{default:a(()=>t[5]||(t[5]=[f("Clear mission on map")])),_:1,__:[5]})]),_:1},8,["disabled"])]),_:1})]),_:1})])],2)],512),[[H,!r.value]])])],6)]))}});export{te as default};
