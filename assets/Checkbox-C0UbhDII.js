import{A as w}from"./AlertIcon-CczqOs8F.js";import{c as M,e as D,t as C,r as x,w as g,h as W,o as T,aN as B,j as F,m as k,n as r,v as V,q as O,s as E,z as o,y as u,B as S,Y as U,x as j,aO as z,ac as A,aK as I,a5 as f}from"./index-DsnP68ci.js";const _=M({__name:"Checkbox",props:{miniWidget:{}},setup(L){const a=D(),e=C(L).miniWidget,i=x(!1);let n;const y=()=>{a.editingMode||(a.setMiniWidgetLastValue(e.value.hash,i.value),e.value.options.dataLakeVariable&&z(e.value.options.dataLakeVariable.id,i.value))};g(()=>a.miniWidgetManagerVars(e.value.hash).configMenuOpen,t=>{t===!0&&(a.showElementPropsDrawer(e.value.hash),setTimeout(()=>{a.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const s=W(()=>{var t;return((t=e.value.options.dataLakeVariable)==null?void 0:t.id)||a.editingMode}),d=()=>{e.value.options.dataLakeVariable&&(n=A(e.value.options.dataLakeVariable.id,t=>{i.value=!!t}),i.value=!!I(e.value.options.dataLakeVariable.id))};return g(()=>{var t;return(t=e.value.options.dataLakeVariable)==null?void 0:t.id},(t,l)=>{l&&n&&f(l,n),t&&d()}),T(()=>{(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,a.updateElementOptions(e.value.hash,{layout:{label:"",align:"center",color:"#FFFFFF"},variableType:"boolean",dataLakeVariable:void 0})),e.value.options.dataLakeVariable?(e.value.options.dataLakeVariable.allowUserToChangeValue||B({...e.value.options.dataLakeVariable,allowUserToChangeValue:!0}),d()):i.value=a.getMiniWidgetLastValue(e.value.hash)}),F(()=>{e.value.options.dataLakeVariable&&n&&f(e.value.options.dataLakeVariable.id,n)}),(t,l)=>{var p,c,m,v,h;return r(),k("div",{class:u(["flex items-center h-[30px]",((p=o(a).elementToShowOnDrawer)==null?void 0:p.hash)===o(e).hash&&o(a).editingMode?"bg-[#00000010] ":"border-0"]),style:j({justifyContent:(c=o(e).options.layout)==null?void 0:c.align}),onClick:l[1]||(l[1]=b=>o(a).editingMode&&o(a).showElementPropsDrawer(o(e).hash))},[((m=o(e).options.layout)==null?void 0:m.label)!==""?(r(),k("p",{key:0,class:u(["mr-3 mb-[3px] text-white",{"opacity-30":!s.value}])},S((v=o(e).options.layout)==null?void 0:v.label),3)):V("",!0),O(U,{modelValue:i.value,"onUpdate:modelValue":[l[0]||(l[0]=b=>i.value=b),y],"hide-details":"",color:(h=o(e).options.layout)==null?void 0:h.color,class:u(["text-white",{"pointer-events-none":o(a).editingMode||!s.value,"opacity-30":!s.value}]),theme:"dark"},null,8,["modelValue","color","class"]),s.value?V("",!0):(r(),E(w,{key:1,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-10 mt-6",tooltip:"This element isn't connected to a data-lake variable yet. Right click and select options to configure it."}))],6)}}});export{_ as default};
