import{A as M}from"./AlertIcon-BBNB53hE.js";import{c as F,e as C,t as W,r as T,w as h,h as V,o as x,aN as B,j as E,m as k,n as p,q as O,v as f,s as S,y as c,z as i,H as U,B as A,ac as I,aK as N,a5 as L,aO as P}from"./index-C8maa8ku.js";const R=F({__name:"Switch",props:{miniWidget:{}},setup(w){const t=C(),r=w,a=W(r).miniWidget,l=T(!0);let n;h(()=>t.miniWidgetManagerVars(a.value.hash).configMenuOpen,e=>{e===!0&&(t.showElementPropsDrawer(a.value.hash),setTimeout(()=>{t.miniWidgetManagerVars(a.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const u=V(()=>{var e;return((e=a.value.options.dataLakeVariable)==null?void 0:e.id)||t.editingMode}),y=V(()=>{var e;return(e=a.value.options.dataLakeVariable)==null?void 0:e.allowUserToChangeValue}),m=()=>{a.value.options.dataLakeVariable&&(n=I(a.value.options.dataLakeVariable.id,e=>{l.value=!!e}),l.value=!!N(a.value.options.dataLakeVariable.id))};h(()=>{var e;return(e=a.value.options.dataLakeVariable)==null?void 0:e.id},(e,o)=>{o&&n&&L(o,n),e&&m()});const D=()=>{t.editingMode||a.value.options.dataLakeVariable&&(t.setMiniWidgetLastValue(a.value.hash,l.value),P(a.value.options.dataLakeVariable.id,l.value))};return x(()=>{var e,o,s;(!r.miniWidget.options||Object.keys(r.miniWidget.options).length===0)&&(a.value.isCustomElement=!0,t.updateElementOptions(r.miniWidget.hash,{layout:{align:((e=a.value.options.layout)==null?void 0:e.align)||"center",color:((o=a.value.options.layout)==null?void 0:o.color)||"#FFFFFF",label:((s=a.value.options.layout)==null?void 0:s.label)||""},variableType:"boolean",dataLakeVariable:void 0,toggled:!0}),l.value=!0),a.value.options.dataLakeVariable?(a.value.options.dataLakeVariable.allowUserToChangeValue||B({...a.value.options.dataLakeVariable,allowUserToChangeValue:!0}),m()):l.value=t.getMiniWidgetLastValue(a.value.hash)}),E(()=>{a.value.options.dataLakeVariable&&n&&L(a.value.options.dataLakeVariable.id,n)}),(e,o)=>{var s,v,g,b;return p(),k("div",{class:c(["flex items-center h-[30px] px-4",((s=i(t).elementToShowOnDrawer)==null?void 0:s.hash)===i(a).hash&&i(t).editingMode?"bg-[#00000010] ":"border-0"]),onClick:o[2]||(o[2]=d=>i(t).editingMode&&i(t).showElementPropsDrawer(i(a).hash))},[O(U,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=d=>l.value=d),"hide-details":"",disabled:i(t).editingMode||!u.value||!y.value,color:((v=i(a).options.layout)==null?void 0:v.color)||"#FFFFFF",class:c([{"opacity-30":!u.value},"min-w-[35px]"]),onChange:D},null,8,["modelValue","disabled","color","class"]),((g=i(a).options.layout)==null?void 0:g.label)!==""?(p(),k("p",{key:0,class:c(["ml-3 mb-[3px] whitespace-nowrap",{"opacity-30":!u.value}])},A((b=i(a).options.layout)==null?void 0:b.label),3)):f("",!0),u.value?f("",!0):(p(),S(M,{key:1,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-6 mt-2",tooltip:"This element isn't connected to a data-lake variable yet. Right click and select options to configure it.",onClick:o[1]||(o[1]=d=>i(t).showElementPropsDrawer(i(a).hash))}))],2)}}});export{R as default};
