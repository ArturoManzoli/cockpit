import{c as W,z as B,J as L,r as k,w as P,o as T,au as I,k as X,h as Y,av as j,aw as N,l as C,m as F,n as u,x as g,O as h,s as a,t as $,v as J,ax as U,_ as q}from"./index-DvbKr47E.js";const G={class:"potentiometer-scale elevation-5"},H={key:0,class:"value-display bg-[#FFFFFF22] border-[#FFFFFF44] border-[1px] rounded-md p-[2px] min-w-9 text-center elevation-1"},K=W({__name:"Dial",props:{miniWidget:{}},setup(_){const o=B(),e=L(_).miniWidget,c=k(0),d=k(-150);P(()=>o.miniWidgetManagerVars(e.value.hash).configMenuOpen,t=>{t===!0&&(o.showElementPropsDrawer(e.value.hash),setTimeout(()=>{o.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0,flush:"post"}),T(()=>{var t;(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,o.updateElementOptions(e.value.hash,{variableType:"number",actionVariable:void 0,layout:{minValue:0,maxValue:100,size:"small",showValue:!0,align:"center",knobColor:"#838383",notchColor:"#303030aa"}})),e.value.options.actionVariable&&I((t=e.value.options.actionVariable)==null?void 0:t.name,l=>{var i;c.value=l;const n=300,s=e.value.options.layout.maxValue-e.value.options.layout.minValue||1;d.value=(l-((i=e.value.options.layout)==null?void 0:i.minValue))/s*n-150})});const D=X(()=>{var t;switch((t=e.value.options.layout)==null?void 0:t.size){case"medium":return"potentiometer-medium";case"large":return"potentiometer-large";default:return"potentiometer-small"}}),A=t=>{t.preventDefault();const n=t.currentTarget.getBoundingClientRect(),s=n.left+n.width/2,i=n.top+n.height/2,m=t.clientX-s,p=t.clientY-i,f=Math.atan2(p,m)*(180/Math.PI),E=d.value,b=y=>{var M,w,x;const R=y.clientX-s,S=y.clientY-i;let r=Math.atan2(S,R)*(180/Math.PI)-f;r>180?r-=360:r<-180&&(r+=360);let v=E+r;v=Math.max(-150,Math.min(150,v)),d.value=v;const z=300,O=((M=e.value.options.layout)==null?void 0:M.maxValue)-((w=e.value.options.layout)==null?void 0:w.minValue)||1;if(c.value=(v+150)/z*O+((x=e.value.options.layout)==null?void 0:x.minValue),e.value.options.actionVariable){if(o.editingMode)return;U(e.value.options.actionVariable.name,c.value.toFixed(1))}},V=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",V)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",V)};return Y(()=>{e.value.options.actionVariable&&(j(e.value.options.actionVariable.name),N(e.value.options.actionVariable.name))}),(t,l)=>{var n,s,i,m,p;return C(),F("div",{id:"dial",class:g(["flex items-center w-auto",((n=a(o).elementToShowOnDrawer)==null?void 0:n.hash)===a(e).hash&&a(o).editingMode?"bg-[#00000010] ":"border-0"]),style:h({justifyContent:(s=a(e).options.layout)==null?void 0:s.align}),onClick:l[0]||(l[0]=f=>a(o).editingMode&&a(o).showElementPropsDrawer(a(e).hash))},[u("div",{class:g(["flex flex-row",a(o).editingMode?"pointer-events-none":"pointer-events-auto"])},[u("div",{class:g(["potentiometer-container w-full",D.value]),onMousedown:A},[u("div",G,[u("div",{class:"potentiometer-knob",style:h({transform:`rotate(${d.value}deg)`,background:((i=a(e).options.layout)==null?void 0:i.knobColor)||"#838383"})},[u("div",{class:"knob-notch",style:h({background:((m=a(e).options.layout)==null?void 0:m.notchColor)||"#222222"})},null,4)],4)])],34)],2),(p=a(e).options.layout)!=null&&p.showValue?(C(),F("div",H,$(Math.round(c.value)),1)):J("",!0)],6)}}}),te=q(K,[["__scopeId","data-v-a8ba4eaa"]]);export{te as default};
