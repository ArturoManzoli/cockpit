import{c as b,z as S,k,J as C,r as f,w as h,o as M,au as O,h as x,av as y,aw as W,l as D,m as E,n as _,H as A,N,Q as z,s as n,x as V,ah as B,O as T,ax as j,_ as P}from"./index-xPy0FtGy.js";const U=b({__name:"Dropdown",props:{miniWidget:{}},setup(g){var r,c;const i=S(),u=g,l=k(()=>{var a;return((a=e.value.options.layout)==null?void 0:a.selectorOptions)||[]}),e=C(u).miniWidget,s=f(l.value.find(a=>{var t;return a.value===((t=u.miniWidget.options.lastSelected)==null?void 0:t.value)})||l.value[0]),d=f(((r=u.miniWidget.options.lastSelected)==null?void 0:r.value)||((c=l.value[0])==null?void 0:c.value));h(()=>i.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(i.showElementPropsDrawer(e.value.hash),setTimeout(()=>{i.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0}),h(s,a=>{i.updateElementOptions(e.value.hash,{...e.value.options,lastSelected:a})});const w=a=>{i.editingMode||!l.value.find(o=>o.value===a)||(d.value=a,e.value.options.actionVariable&&j(e.value.options.actionVariable.id,a),e.value.options.lastValue=a)};return M(()=>{var a;(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,i.updateElementOptions(e.value.hash,{lastValue:void 0,actionVariable:void 0,layout:{selectorOptions:[],align:"start",width:168}})),e.value.options.actionVariable&&(O(e.value.options.actionVariable.name,t=>{s.value=l.value.find(o=>o.value===t)}),s.value=l.value.find(t=>{var o;return t.value===((o=e.value.options.lastSelected)==null?void 0:o.value)})),((a=e.value.options.lastSelected)==null?void 0:a.name)!==""&&(s.value=e.value.options.lastSelected)}),x(()=>{e.value.options.actionVariable&&(y(e.value.options.actionVariable.name),W(e.value.options.actionVariable.name))}),(a,t)=>{var o,p,v;return D(),E("div",{class:V(["flex w-full",((o=n(i).elementToShowOnDrawer)==null?void 0:o.hash)===n(e).hash&&n(i).editingMode?"bg-[#00000010] ":"border-0"]),style:T({width:"100%",justifyContent:(p=n(e).options.layout)==null?void 0:p.align}),onClick:t[1]||(t[1]=m=>n(i).editingMode&&n(i).showElementPropsDrawer(n(e).hash))},[_("div",null,[A(B,{modelValue:d.value,"onUpdate:modelValue":[t[0]||(t[0]=m=>d.value=m),w],items:l.value,"item-title":"name","item-value":"value",theme:"dark",density:"compact",variant:"filled","min-width":((v=n(e).options.layout)==null?void 0:v.width)||168,"hide-details":"",class:V(["text-white",{"pointer-events-none":n(i).editingMode}])},{default:N(()=>t[2]||(t[2]=[z(" > ")])),_:1},8,["modelValue","items","min-width","class"])])],6)}}}),I=P(U,[["__scopeId","data-v-c6cb5f9a"]]);export{I as default};
