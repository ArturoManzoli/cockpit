import{A as y}from"./AlertIcon-CczqOs8F.js";import{c as M,e as D,t as F,r as W,w as b,h as C,o as x,aN as T,j as B,m as V,n as d,q as O,v as k,s as S,y as p,z as i,H as E,B as U,ac as A,aK as I,a5 as f,aO as N}from"./index-DsnP68ci.js";const P=M({__name:"Switch",props:{miniWidget:{}},setup(L){const t=D(),r=L,a=F(r).miniWidget,l=W(!0);let n;b(()=>t.miniWidgetManagerVars(a.value.hash).configMenuOpen,e=>{e===!0&&(t.showElementPropsDrawer(a.value.hash),setTimeout(()=>{t.miniWidgetManagerVars(a.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const u=C(()=>{var e;return((e=a.value.options.dataLakeVariable)==null?void 0:e.id)||t.editingMode}),c=()=>{a.value.options.dataLakeVariable&&(n=A(a.value.options.dataLakeVariable.id,e=>{l.value=!!e}),l.value=!!I(a.value.options.dataLakeVariable.id))};b(()=>{var e;return(e=a.value.options.dataLakeVariable)==null?void 0:e.id},(e,o)=>{o&&n&&f(o,n),e&&c()});const w=()=>{t.editingMode||a.value.options.dataLakeVariable&&(t.setMiniWidgetLastValue(a.value.hash,l.value),N(a.value.options.dataLakeVariable.id,l.value))};return x(()=>{var e,o,s;(!r.miniWidget.options||Object.keys(r.miniWidget.options).length===0)&&(a.value.isCustomElement=!0,t.updateElementOptions(r.miniWidget.hash,{layout:{align:((e=a.value.options.layout)==null?void 0:e.align)||"center",color:((o=a.value.options.layout)==null?void 0:o.color)||"#FFFFFF",label:((s=a.value.options.layout)==null?void 0:s.label)||""},variableType:"boolean",dataLakeVariable:void 0,toggled:!0}),l.value=!0),a.value.options.dataLakeVariable?(a.value.options.dataLakeVariable.allowUserToChangeValue||T({...a.value.options.dataLakeVariable,allowUserToChangeValue:!0}),c()):l.value=t.getMiniWidgetLastValue(a.value.hash)}),B(()=>{a.value.options.dataLakeVariable&&n&&f(a.value.options.dataLakeVariable.id,n)}),(e,o)=>{var s,m,v,g;return d(),V("div",{class:p(["flex items-center h-[30px] px-4",((s=i(t).elementToShowOnDrawer)==null?void 0:s.hash)===i(a).hash&&i(t).editingMode?"bg-[#00000010] ":"border-0"]),onClick:o[1]||(o[1]=h=>i(t).editingMode&&i(t).showElementPropsDrawer(i(a).hash))},[O(E,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=h=>l.value=h),"hide-details":"",color:((m=i(a).options.layout)==null?void 0:m.color)||"#FFFFFF",class:p([{"pointer-events-none":i(t).editingMode||!u.value,"opacity-30":!u.value},"min-w-[35px]"]),onChange:w},null,8,["modelValue","color","class"]),((v=i(a).options.layout)==null?void 0:v.label)!==""?(d(),V("p",{key:0,class:p(["ml-3 mb-[3px] whitespace-nowrap",{"opacity-30":!u.value}])},U((g=i(a).options.layout)==null?void 0:g.label),3)):k("",!0),u.value?k("",!0):(d(),S(y,{key:1,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-6 mt-2",tooltip:"This element isn't connected to a data-lake variable yet. Right click and select options to configure it."}))],2)}}});export{P as default};
