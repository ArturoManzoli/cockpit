import{A as z}from"./AlertIcon-4RZPqScJ.js";import{c as B,e as R,aR as U,r as j,w as M,h as p,o as A,j as $,m as T,n as m,p as W,q as S,s as q,v as C,z as t,y as c,x as N,B as K,E as G,aN as H,aO as J,I as Q,a8 as X,ac as Y,aK as Z,a5 as E,aP as ee,_ as ae}from"./index-D6uV4iv9.js";const te=B({__name:"Slider",props:{miniWidget:{}},setup(I){const i=R(),e=U(I).miniWidget,v=j(0);let l,r;const u=a=>{var s;let o;a==null||isNaN(Number(a))?o=((s=e.value.options.layout)==null?void 0:s.minValue)||0:o=Number(a),v.value=o};M(()=>i.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(i.showElementPropsDrawer(e.value.hash),setTimeout(()=>{i.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const n=p(()=>{var a;return!!((a=e.value.options.dataLakeVariable)!=null&&a.id)}),O=p(()=>{var a;return((a=e.value.options.dataLakeVariable)==null?void 0:a.allowUserToChangeValue)===!0}),b=p(()=>{var a;return!!((a=e.value.options.dataLakeVariable)!=null&&a.id)&&O.value&&!i.editingMode}),V=()=>{e.value.options.dataLakeVariable&&(l=Y(e.value.options.dataLakeVariable.id,a=>{r&&new Date().getTime()-r.getTime()<100||(r=new Date,u(a))}),u(Z(e.value.options.dataLakeVariable.id)))};M(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,o)=>{o&&l&&E(o,l),a&&V()});const P=a=>{if(!i.editingMode&&e.value.options.dataLakeVariable){const o=Number(a.toFixed(1));i.setMiniWidgetLastValue(e.value.hash,o),ee(e.value.options.dataLakeVariable.id,o)}};return A(()=>{var a;(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,i.updateElementOptions(e.value.hash,{layout:{label:"",minValue:0,maxValue:100,showTooltip:!0,color:"#FFFFFF",coloredLabel:!1,labelWidth:((a=e.value.options.layout)==null?void 0:a.labelWidth)||0},variableType:"number",dataLakeVariable:void 0})),e.value.options.dataLakeVariable?V():u(i.getMiniWidgetLastValue(e.value.hash))}),$(()=>{e.value.options.dataLakeVariable&&l&&E(e.value.options.dataLakeVariable.id,l)}),(a,o)=>{var s,h,g,k,f,y;return m(),T("div",{class:c(["slider-container",((s=t(i).elementToShowOnDrawer)==null?void 0:s.hash)===t(e).hash&&t(i).editingMode?"bg-[#00000010] ":"border-0"]),onClick:o[2]||(o[2]=d=>t(i).editingMode&&t(i).showElementPropsDrawer(t(e).hash))},[W("div",{style:N({minWidth:((h=t(e).options.layout)==null?void 0:h.labelWidth)+"px"})},[((g=t(e).options.layout)==null?void 0:g.label)!==""?(m(),T("p",{key:0,style:N({color:(k=t(e).options.layout)!=null&&k.coloredLabel?(f=t(e).options.layout)==null?void 0:f.color:"#FFFFFF"}),class:c(["mr-3 mb-[3px]",{"opacity-50":!n.value}])},K((y=t(e).options.layout)==null?void 0:y.label),7)):C("",!0)],4),S(X,{text:"This element is on display mode. To make it interactive, create or select a different data-lake variable",location:"top","open-delay":"500",disabled:b.value||!n.value},{activator:G(({props:d})=>{var L,w,x,D,F;return[W("div",H(J(d)),[S(Q,{"model-value":v.value,min:(L=t(e).options.layout)==null?void 0:L.minValue,max:(w=t(e).options.layout)==null?void 0:w.maxValue,"thumb-label":(x=t(e).options.layout)==null?void 0:x.showTooltip,"hide-details":"",class:c(["min-w-20",{"scale-75":((D=t(e).options.layout)==null?void 0:D.size)==="small","opacity-30":!n.value,"pointer-events-none":!b.value}]),color:((F=t(e).options.layout)==null?void 0:F.color)||"white","onUpdate:modelValue":o[0]||(o[0]=_=>P(_))},null,8,["model-value","min","max","thumb-label","color","class"])],16)]}),_:1},8,["disabled"]),n.value?C("",!0):(m(),q(z,{key:0,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-16 mt-[10px]",tooltip:"This element isn't connected to a data-lake variable yet. Right click and select options to configure it.",onClick:o[1]||(o[1]=d=>t(i).showElementPropsDrawer(t(e).hash))}))],2)}}}),se=ae(te,[["__scopeId","data-v-04b6d1e2"]]);export{se as default};
