import{A as I}from"./AlertIcon-CvUjofMq.js";import{c as O,e as U,aQ as B,r as _,w as F,h as M,o as z,aN as P,j,m as x,n as p,p as A,q as R,s as $,v as W,z as t,y as m,x as T,B as q,I as K,ac as Q,aK as G,a5 as C,aO as H,_ as J}from"./index-DdZj8PIb.js";const X=O({__name:"Slider",props:{miniWidget:{}},setup(S){const l=U(),e=B(S).miniWidget,c=_(0);let i,r;const u=a=>{var s;let o;a==null||isNaN(Number(a))?o=((s=e.value.options.layout)==null?void 0:s.minValue)||0:o=Number(a),c.value=o};F(()=>l.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(l.showElementPropsDrawer(e.value.hash),setTimeout(()=>{l.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const n=M(()=>{var a;return((a=e.value.options.dataLakeVariable)==null?void 0:a.id)||l.editingMode}),N=M(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.allowUserToChangeValue}),b=()=>{e.value.options.dataLakeVariable&&(i=Q(e.value.options.dataLakeVariable.id,a=>{r&&new Date().getTime()-r.getTime()<100||(r=new Date,u(a))}),u(G(e.value.options.dataLakeVariable.id)))};F(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,o)=>{o&&i&&C(o,i),a&&b()});const E=a=>{if(!l.editingMode&&e.value.options.dataLakeVariable){const o=Number(a.toFixed(1));l.setMiniWidgetLastValue(e.value.hash,o),H(e.value.options.dataLakeVariable.id,o)}};return z(()=>{var a;(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,l.updateElementOptions(e.value.hash,{layout:{label:"",minValue:0,maxValue:100,showTooltip:!0,color:"#FFFFFF",coloredLabel:!1,labelWidth:((a=e.value.options.layout)==null?void 0:a.labelWidth)||0},variableType:"number",dataLakeVariable:void 0})),e.value.options.dataLakeVariable?(e.value.options.dataLakeVariable.allowUserToChangeValue||P({...e.value.options.dataLakeVariable,allowUserToChangeValue:!0}),b()):u(l.getMiniWidgetLastValue(e.value.hash))}),j(()=>{e.value.options.dataLakeVariable&&i&&C(e.value.options.dataLakeVariable.id,i)}),(a,o)=>{var s,V,v,h,g,k,f,L,y,w,D;return p(),x("div",{class:m(["slider-container",((s=t(l).elementToShowOnDrawer)==null?void 0:s.hash)===t(e).hash&&t(l).editingMode?"bg-[#00000010] ":"border-0"]),onClick:o[2]||(o[2]=d=>t(l).editingMode&&t(l).showElementPropsDrawer(t(e).hash))},[A("div",{style:T({minWidth:((V=t(e).options.layout)==null?void 0:V.labelWidth)+"px"})},[((v=t(e).options.layout)==null?void 0:v.label)!==""?(p(),x("p",{key:0,style:T({color:(h=t(e).options.layout)!=null&&h.coloredLabel?(g=t(e).options.layout)==null?void 0:g.color:"#FFFFFF"}),class:m(["mr-3 mb-[3px]",{"opacity-30":!n.value}])},q((k=t(e).options.layout)==null?void 0:k.label),7)):W("",!0)],4),R(K,{"model-value":c.value,min:(f=t(e).options.layout)==null?void 0:f.minValue,max:(L=t(e).options.layout)==null?void 0:L.maxValue,"thumb-label":(y=t(e).options.layout)==null?void 0:y.showTooltip,disabled:t(l).editingMode||!n.value||!N.value,"hide-details":"",class:m(["min-w-20",{"scale-75":((w=t(e).options.layout)==null?void 0:w.size)==="small","opacity-30":!n.value}]),color:((D=t(e).options.layout)==null?void 0:D.color)||"white","onUpdate:modelValue":o[0]||(o[0]=d=>E(d))},null,8,["model-value","min","max","thumb-label","disabled","color","class"]),n.value?W("",!0):(p(),$(I,{key:0,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-16 mt-[10px]",tooltip:"This element isn't connected to a data-lake variable yet. Right click and select options to configure it.",onClick:o[1]||(o[1]=d=>t(l).showElementPropsDrawer(t(e).hash))}))],2)}}}),ae=J(X,[["__scopeId","data-v-740a0e51"]]);export{ae as default};
