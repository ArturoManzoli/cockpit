import{c as f,z as g,J as V,r as w,k as b,w as p,o as k,au as S,h as C,av as M,aw as O,l as y,m as x,n as W,H as _,s as o,x as m,ah as D,O as E,ax as A,_ as z}from"./index-CvSTGUCx.js";const B=f({__name:"Dropdown",props:{miniWidget:{}},setup(v){const t=g(),l=v,e=V(l).miniWidget,n=w(l.miniWidget.options.lastSelected||void 0),u=b(()=>{var a;return((a=e.value.options.layout)==null?void 0:a.selectorOptions.map(i=>({...i})))||[]});p(()=>t.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(t.showElementPropsDrawer(e.value.hash),setTimeout(()=>{t.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0}),p(n,a=>{t.updateElementOptions(e.value.hash,{...e.value.options,lastSelected:a})});const h=a=>{var i;t.editingMode||(i=e.value.options.actionVariable)!=null&&i.id&&A(e.value.options.actionVariable.id,a)};return k(()=>{var a;(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,t.updateElementOptions(e.value.hash,{cockpitAction:void 0,actionVariable:void 0,lastSelected:{name:"",value:""},layout:{selectorOptions:[{name:"",value:""}],align:"start",width:168}})),e.value.options.actionVariable&&S(e.value.options.actionVariable.name,i=>{n.value=u.value.find(s=>s.value===i)}),((a=e.value.options.lastSelected)==null?void 0:a.name)!==""&&(n.value=e.value.options.lastSelected)}),C(()=>{e.value.options.actionVariable&&(M(e.value.options.actionVariable.name),O(e.value.options.actionVariable.name))}),(a,i)=>{var s,d,r;return y(),x("div",{class:m(["flex w-full",((s=o(t).elementToShowOnDrawer)==null?void 0:s.hash)===o(e).hash&&o(t).editingMode?"bg-[#00000010] ":"border-0"]),style:E({width:"100%",justifyContent:(d=o(e).options.layout)==null?void 0:d.align}),onClick:i[1]||(i[1]=c=>o(t).editingMode&&o(t).showElementPropsDrawer(o(e).hash))},[W("div",null,[_(D,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=c=>n.value=c),items:u.value,"item-title":"name","item-value":"value",theme:"dark",density:"compact",variant:"filled","min-width":((r=o(e).options.layout)==null?void 0:r.width)||168,"hide-details":"",class:m(["text-white",{"pointer-events-none":o(t).editingMode}]),onChange:h},null,8,["modelValue","items","min-width","class"])])],6)}}}),N=z(B,[["__scopeId","data-v-58dc260f"]]);export{N as default};
