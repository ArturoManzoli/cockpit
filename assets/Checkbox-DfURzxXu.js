import{A as x}from"./AlertIcon-BBNB53hE.js";import{c as D,e as M,t as T,r as W,w as g,h as k,o as B,aN as E,j as F,m as V,n as u,v as f,q as O,s as S,z as o,y as d,B as U,Y as j,x as z,aO as A,ac as I,aK as N,a5 as L}from"./index-C8maa8ku.js";const q=D({__name:"Checkbox",props:{miniWidget:{}},setup(w){const t=M(),e=T(w).miniWidget,l=W(!1);let n;const y=()=>{t.editingMode||(t.setMiniWidgetLastValue(e.value.hash,l.value),e.value.options.dataLakeVariable&&A(e.value.options.dataLakeVariable.id,l.value))};g(()=>t.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(t.showElementPropsDrawer(e.value.hash),setTimeout(()=>{t.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const s=k(()=>{var a;return((a=e.value.options.dataLakeVariable)==null?void 0:a.id)||t.editingMode}),C=k(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.allowUserToChangeValue}),p=()=>{e.value.options.dataLakeVariable&&(n=I(e.value.options.dataLakeVariable.id,a=>{l.value=!!a}),l.value=!!N(e.value.options.dataLakeVariable.id))};return g(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,i)=>{i&&n&&L(i,n),a&&p()}),B(()=>{(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,t.updateElementOptions(e.value.hash,{layout:{label:"",align:"center",color:"#FFFFFF"},variableType:"boolean",dataLakeVariable:void 0})),e.value.options.dataLakeVariable?(e.value.options.dataLakeVariable.allowUserToChangeValue||E({...e.value.options.dataLakeVariable,allowUserToChangeValue:!0}),p()):l.value=t.getMiniWidgetLastValue(e.value.hash)}),F(()=>{e.value.options.dataLakeVariable&&n&&L(e.value.options.dataLakeVariable.id,n)}),(a,i)=>{var c,m,v,b,h;return u(),V("div",{class:d(["flex items-center h-[30px] min-w-[50px] px-1",((c=o(t).elementToShowOnDrawer)==null?void 0:c.hash)===o(e).hash&&o(t).editingMode?"bg-[#00000010] ":"border-0"]),style:z({justifyContent:(m=o(e).options.layout)==null?void 0:m.align}),onClick:i[2]||(i[2]=r=>o(t).editingMode&&o(t).showElementPropsDrawer(o(e).hash))},[((v=o(e).options.layout)==null?void 0:v.label)!==""?(u(),V("p",{key:0,class:d(["mr-3 mb-[3px] text-white",{"opacity-30":!s.value}])},U((b=o(e).options.layout)==null?void 0:b.label),3)):f("",!0),O(j,{modelValue:l.value,"onUpdate:modelValue":[i[0]||(i[0]=r=>l.value=r),y],"hide-details":"",color:(h=o(e).options.layout)==null?void 0:h.color,class:d(["text-white",{"opacity-30":!s.value}]),disabled:o(t).editingMode||!s.value||!C.value,theme:"dark"},null,8,["modelValue","color","disabled","class"]),s.value?f("",!0):(u(),S(x,{key:1,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-10 mt-[10px]",tooltip:"This element isn't connected to a data-lake variable yet. Right click and select options to configure it.",onClick:i[1]||(i[1]=r=>o(t).showElementPropsDrawer(o(e).hash))}))],6)}}});export{q as default};
