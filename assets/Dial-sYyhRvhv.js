import{c as R,J as z,I as E,r as f,o as L,bI as S,k as B,h as I,bJ as O,bK as j,l as y,m as b,n as l,x as m,O as V,s as i,t as T,v as J,bL as N,_ as X}from"./index-mqoiqCTl.js";const Y={class:"potentiometer-scale elevation-5"},K={key:0,class:"value-display bg-[#FFFFFF22] border-[#FFFFFF44] border-[1px] rounded-md p-[2px] min-w-9 text-center elevation-1"},U=R({__name:"Dial",props:{element:{}},setup(x){const r=z(),e=E(x).element,u=f(0),c=f(-150);L(()=>{var t;(!e.value.options||Object.keys(e.value.options).length===0)&&r.updateElementOptions(e.value.hash,{variableType:"number",actionParameter:void 0,layout:{minValue:0,maxValue:100,size:"medium",showValue:!0,align:"center"}}),e.value.options.actionParameter&&S((t=e.value.options.actionParameter)==null?void 0:t.name,s=>{var o;u.value=s;const a=300,n=e.value.options.layout.maxValue-e.value.options.layout.minValue||1;c.value=(s-((o=e.value.options.layout)==null?void 0:o.minValue))/n*a-150})});const F=B(()=>{var t;switch((t=e.value.options.layout)==null?void 0:t.size){case"medium":return"potentiometer-medium";case"large":return"potentiometer-large";default:return"potentiometer-small"}}),_=t=>{t.preventDefault();const a=t.currentTarget.getBoundingClientRect(),n=d=>{var v,g,h;const w=a.left+a.width/2,k=a.top+a.height/2,C=d.clientX-w,M=d.clientY-k,D=Math.atan2(M,C)*(180/Math.PI),p=Math.max(-150,Math.min(150,D));c.value=p;const P=300,A=((v=e.value.options.layout)==null?void 0:v.maxValue)-((g=e.value.options.layout)==null?void 0:g.minValue);u.value=(p+150)/P*A+((h=e.value.options.layout)==null?void 0:h.minValue),e.value.options.actionParameter&&N(e.value.options.actionParameter.name,u.value.toFixed(1))},o=()=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",o)};return I(()=>{e.value.options.actionParameter&&(O(e.value.options.actionParameter.name),j(e.value.options.actionParameter.name))}),(t,s)=>{var a,n,o;return y(),b("div",{id:"dial",class:m(["flex items-center w-auto",((a=i(r).elementToShowOnDrawer)==null?void 0:a.hash)===i(e).hash&&i(r).editingMode?"bg-[#00000010] ":"border-0"]),style:V({justifyContent:(n=i(e).options.layout)==null?void 0:n.align})},[l("div",{class:m(["flex flex-row",i(r).editingMode?"pointer-events-none":"pointer-events-auto"])},[l("div",{class:m(["potentiometer-container w-full",F.value]),onMousedown:_},[l("div",Y,[l("div",{class:"potentiometer-knob",style:V({transform:`rotate(${c.value}deg)`})},s[0]||(s[0]=[l("div",{class:"knob-notch"},null,-1)]),4)])],34)],2),(o=i(e).options.layout)!=null&&o.showValue?(y(),b("div",K,T(Math.round(u.value)),1)):J("",!0)],6)}}}),q=X(U,[["__scopeId","data-v-ce5088a4"]]);export{q as default};
