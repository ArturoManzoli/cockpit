import{A as W}from"./AlertIcon-4RZPqScJ.js";import{c as x,e as T,t as B,r as E,w as k,h as p,o as O,j as P,m as f,n as c,q as L,s as S,v as w,E as N,p as z,aN as A,aO as I,H as U,y as v,z as i,B as j,a8 as R,ac as $,aK as q,a5 as y,aP as H}from"./index-D6uV4iv9.js";const G=x({__name:"Switch",props:{miniWidget:{}},setup(D){const t=T(),r=D,e=B(r).miniWidget,l=E(!0);let n;k(()=>t.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(t.showElementPropsDrawer(e.value.hash),setTimeout(()=>{t.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const u=p(()=>{var a;return!!((a=e.value.options.dataLakeVariable)!=null&&a.id)}),F=p(()=>{var a;return((a=e.value.options.dataLakeVariable)==null?void 0:a.allowUserToChangeValue)===!0}),m=p(()=>{var a;return!!((a=e.value.options.dataLakeVariable)!=null&&a.id)&&F.value&&!t.editingMode}),g=()=>{e.value.options.dataLakeVariable&&(n=$(e.value.options.dataLakeVariable.id,a=>{l.value=!!a}),l.value=!!q(e.value.options.dataLakeVariable.id))};k(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,o)=>{o&&n&&y(o,n),a&&g()});const M=()=>{t.editingMode||e.value.options.dataLakeVariable&&(t.setMiniWidgetLastValue(e.value.hash,l.value),H(e.value.options.dataLakeVariable.id,l.value))};return O(()=>{var a,o,s;(!r.miniWidget.options||Object.keys(r.miniWidget.options).length===0)&&(e.value.isCustomElement=!0,t.updateElementOptions(r.miniWidget.hash,{layout:{align:((a=e.value.options.layout)==null?void 0:a.align)||"center",color:((o=e.value.options.layout)==null?void 0:o.color)||"#FFFFFF",label:((s=e.value.options.layout)==null?void 0:s.label)||""},variableType:"boolean",dataLakeVariable:void 0,toggled:!0}),l.value=!0),e.value.options.dataLakeVariable?g():l.value=t.getMiniWidgetLastValue(e.value.hash)}),P(()=>{e.value.options.dataLakeVariable&&n&&y(e.value.options.dataLakeVariable.id,n)}),(a,o)=>{var s;return c(),f("div",{class:v(["flex items-center h-[30px] px-4",((s=i(t).elementToShowOnDrawer)==null?void 0:s.hash)===i(e).hash&&i(t).editingMode?"bg-[#00000010] ":"border-0"]),onClick:o[2]||(o[2]=d=>i(t).editingMode&&i(t).showElementPropsDrawer(i(e).hash))},[L(R,{text:"This element is on display mode. To make it interactive, create or select a different data-lake variable",location:"top","open-delay":"500",disabled:m.value||!u.value},{activator:N(({props:d})=>{var h,b,V;return[z("div",A(I(d)),[L(U,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=C=>l.value=C),"hide-details":"",color:((h=i(e).options.layout)==null?void 0:h.color)||"#FFFFFF",class:v([{"opacity-40":!u.value,"cursor-default pointer pointer-events-none":!m.value},"min-w-[35px]"]),onChange:M},null,8,["modelValue","color","class"]),((b=i(e).options.layout)==null?void 0:b.label)!==""?(c(),f("p",{key:0,class:v(["ml-3 mb-[3px] whitespace-nowrap",{"opacity-50":!u.value}])},j((V=i(e).options.layout)==null?void 0:V.label),3)):w("",!0)],16)]}),_:1},8,["disabled"]),u.value?w("",!0):(c(),S(W,{key:0,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-6 mt-[10px]",tooltip:"This element isn't connected to a data-lake variable yet. Click here to configure it.",onClick:o[1]||(o[1]=d=>i(t).showElementPropsDrawer(i(e).hash))}))],2)}}});export{G as default};
